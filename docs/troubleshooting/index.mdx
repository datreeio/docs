---
title: Troubleshooting
slug: /troubleshooting
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Tokens mismatch

![troubleshooting_token_mismatch](/img/troubleshooting/1.avif)

If you see this message in your dashboard, it means that we identified there are two [account tokens](/setup/account-token) associate with your account - one in your CLI and a different one in your dashboard. This can be an issue because it will break the connection between the policy checks that are executed (CLI) and the centralized policy (dashboard). As a result, you will not be able to control your policies or see results on your history page.

### How to fix tokens mismatch?

You will need to set your CLI token to match your dashboard token:

1.  [Get your dashboard account token](/setup/account-token#1-get-your-account-token-from-the-dashboard)

2.  [Set your dashboard account token in your CLI](/setup/account-token#2-set-your-token-in-the-cli)

---

### Seems like your token does not exist

If you deleted your account, then ran a policy check - you will get this output: "_Seems like your token does not exist_".  
To fix this, delete your config file (`$HOME/.datree/config.yaml`), then run another policy check.

---

## Running Datree on Alpine (Linux) image

Alpine is missing some dependencies that [are required](https://github.com/datreeio/helm-datree/issues/22) to successfully install Datree.

### How to fix missing dependencies?

Adding the following command to the CI should fix this: `apk add curl bash`
This will add curl and bash commands which our install scripts require in order to run.

---

## Schema validation failure

If you get the following message in your CLI: 
```terminal
❌  k8s schema validation error: could not find schema for [kindName]  
``` 
It means the schema validation check failed and there are two possible root causes.

### Wrong K8s version is used in the schema validation check

If the K8s schema validation version does not match your manifest version, To perform the schema validation check, the CLI pulls the relevant schema according to your default K8s schema, or the value of the `--schema-version` flag.  
To fix this failure, update your default K8s version in the dashboard to the same K8s version as your cluster, or pass the `--schema-version` flag.  
Instructions for how to update your default K8s version can be found [here](https://hub.datree.io/setup/schema-validation#changing-the-default-schema-version)

#### Example:
The `v1beta1` API of Ingress are no longer served on K8s version 1.22.0. Therefore, if the K8s schema validion is set to 1.22.0 and a manifest with the `v1beta1` API will be passed to Datree, it will not be found and the schema validation step will fail.

<Tabs>
  <TabItem value='Deprecated API version' label='Deprecated API version' default>   

    apiVersion: networking.k8s.io/v1beta1  
    kind: Ingress  
    metadata:  
      name: example  
    spec:  
      backend:  
        serviceName: default-backend   
        servicePort: 80
  </TabItem>
  <TabItem value='Valid API version' label='Valid API version'>

    apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      name: example
    spec:
      defaultBackend:
        service:
          name: default-backend
          port:
            number: 80
  </TabItem>
</Tabs>

---

### Missing schema for a CRD
CustomResources (CRs) are not K8s native objects. Therefore, if you're trying to validate CRs that don't exist in the CRD-catalog, you will need to use the CRD Extractor to validate them ([read more](https://hub.datree.io/setup/schema-validation#crd-support)).  

## Haven't found a solution to your problem?

Let us know by opening an issue in our [github](https://github.com/datreeio/datree) and we will gladly help!
