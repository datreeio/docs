---
title: Troubleshooting
slug: /troubleshooting
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Tokens mismatch

![troubleshooting_token_mismatch](/img/troubleshooting/1.avif)

If you see this message in your dashboard, it means that we identified there are two [account tokens](/setup/account-token) associate with your account - one in your CLI and a different one in your dashboard. This can be an issue because it will break the connection between the policy checks that are executed (CLI) and the centralized policy (dashboard). As a result, you will not be able to control your policies or see results on your history page.

### How to fix tokens mismatch?

You will need to set your CLI token to match your dashboard token:

1.  [Get your dashboard account token](/setup/account-token#1-get-your-account-token-from-the-dashboard)

2.  [Set your dashboard account token in your CLI](/setup/account-token#2-set-your-token-in-the-cli)

---

### Seems like your token does not exist

If you deleted your account, then ran a policy check - you will get this output: "_Seems like your token does not exist_".  
To fix this, delete your config file (`$HOME/.datree/config.yaml`), then run another policy check.

---

## Running Datree on Alpine (Linux) image

Alpine is missing some dependencies that [are required](https://github.com/datreeio/helm-datree/issues/22) to successfully install Datree.

### How to fix missing dependencies?

Adding the following command to the CI should fix this: `apk add curl bash`
This will add curl and bash commands which our install scripts require in order to run.

---

## Schema validation failures

If you get the following message in your CLI: 
```terminal
❌  k8s schema validation error: could not find schema for [KIND]  
``` 
It means that the resource's schema which is used to perform the schema valiation was not found, and it can be caused by any of the following-

### Wrong K8s version is used in the schema validation check
To perform the schema validation check, the CLI pulls the relevant schema according to your default K8s schema, or the value of the `--schema-version` flag.  
To fix this failure, update your default K8s version in the dashboard to the same K8s version as your cluster, or pass the `--schema-version` flag.  
Instructions for how to update your default K8s version can be found [here](https://hub.datree.io/setup/schema-validation#changing-the-default-schema-version)

### Missing schema for a CRD
As part of the schema validation phase, the CLI looks for the schemas in multiple GitHub repositories that contain the schema of native K8s objects and popular CRDs.  
If you're testing a CRD that is neither a native K8s object, nor listed in the CRDs catalog, you can extract the schema to validate your manifests.  
Find the instructions [here](https://hub.datree.io/setup/schema-validation#crd-support)

### Deprecated APIversion
Some resources' API version got deprecated in the latest k8s version releases, it could be that you should migrate your resources to the newer version. 
#### Example:
The beta API versoins of Ingress are no longer served on K8s version 1.22 on, therefore the schema will not be found.

<Tabs>
  <TabItem value='Deprecated API version' label='Deprecated API version' default>   

    apiVersion: networking.k8s.io/v1beta1  
    kind: Ingress  
    metadata:  
      name: example  
    spec:  
      backend:  
        serviceName: default-backend   
        servicePort: 80
  </TabItem>
  <TabItem value='Valid API version' label='Valid API version'>

    apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      name: example
    spec:
      defaultBackend:
        service:
          name: default-backend
          port:
            number: 80
  </TabItem>
</Tabs>


---

## Haven't found a solution to your problem?

Let us know by opening an issue in our [github](https://github.com/datreeio/datree) and we will gladly help!
