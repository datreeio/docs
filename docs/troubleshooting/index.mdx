---
title: Troubleshooting
slug: /troubleshooting
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## Tokens mismatch

![troubleshooting_token_mismatch](/img/troubleshooting/1.avif)

If you see this message in your dashboard, it means that we identified there are two [account tokens](/setup/account-token) associate with your account - one in your CLI and a different one in your dashboard. This can be an issue because it will break the connection between the policy checks that are executed (CLI) and the centralized policy (dashboard). As a result, you will not be able to control your policies or see results on your history page.

### How to fix tokens mismatch?

You will need to set your CLI token to match your dashboard token:

1.  [Get your dashboard account token](/setup/account-token#1-get-your-account-token-from-the-dashboard)

2.  [Set your dashboard account token in your CLI](/setup/account-token#2-set-your-token-in-the-cli)

---

### Seems like your token does not exist

If you deleted your account, then ran a policy check - you will get this output: "_Seems like your token does not exist_".  
To fix this, delete your config file (`$HOME/.datree/config.yaml`), then run another policy check.

---

## Running Datree on Alpine (Linux) image

Alpine is missing some dependencies that [are required](https://github.com/datreeio/helm-datree/issues/22) to successfully install Datree.

### How to fix missing dependencies?

Adding the following command to the CI should fix this: `apk add curl bash`
This will add curl and bash commands which our install scripts require in order to run.

---

## Schema validation failure

TL;DR: If you get the following message in your CLI: 
```terminal
❌  k8s schema validation error: could not find schema for [kindName]  
``` 
It means the schema validation check failed and there are three possible root causes:
* Worng Kubernetes schema version - you need to update the schema version on your dashboard
* Deprecated API versions - you need to fix your manifest
* Missing schema for a CRD - you need to use the CRD Extractor

### Worng Kubernetes schema version

If Datree's schema validation version does not match your Kubernetes cluster version, it can produce this type of error.
To check your Kubernetes cluster version, you can run `kubectl version --short` and read your _Server Version_:
![image](https://user-images.githubusercontent.com/19731161/186085079-9b55a416-f185-473f-bcf3-ad6ef9bac8e3.png)
Your Datree's schema validation version can be found on your dashboard (under SETTINGS) or in your policy check summary:
![image](https://user-images.githubusercontent.com/19731161/186085584-66d8edae-b03e-4f0f-baf4-fb8ac851cb6a.png)

#### How to solve this?
Update Datree's schema validation version in the dashboard to be the same Kubernetes version as your cluster, or pass the `--schema-version` flag ([read more](https://hub.datree.io/setup/schema-validation#changing-the-default-schema-version))

### Deprecated API versions

New Kubernetes releases may contain deprecations of APIs for different K8s objects. For example, the `v1beta1` API of Ingress are no longer served on Kubernetes version 1.22.0. Therefore, if the Kubernetes schema validion is set to 1.22.0 and a manifest with the `v1beta1` API will be passed to Datree, it will not be found and the schema validation step will fail.

<Tabs>
  <TabItem value='Deprecated API version' label='Deprecated API version' default>   

    apiVersion: networking.k8s.io/v1beta1 # deprecated API version
    kind: Ingress  
    metadata:  
      name: example  
  </TabItem>
  
  <TabItem value='Valid API version' label='Valid API version'>

    apiVersion: networking.k8s.io/v1 # supported API version
    kind: Ingress
    metadata:
      name: example
  </TabItem>
</Tabs>

#### How to solve this?
Update your manifests to match the Kubernetes schema defanition or it will not be accepted by your cluster ([read more](https://kubernetes.io/docs/reference/using-api/deprecation-guide/#removed-apis-by-release)).

### Missing schema for a CRD

CustomResources (CRs) are not Kubernetes native objects and therefore, they are not part Kubernetes offical schema. To overcome this, we crated the CRDs-catalog project but if you're trying to validate CRs that _don't exist in the CRD-catalog_, the schema validation step will fail.

#### How to solve this?
You will need to use the _CRD Extractor_ to validate them ([read more](https://github.com/datreeio/CRDs-catalog#usage)).  

---

## Haven't found a solution to your problem?

Let us know by opening an issue in our [GitHub open-source project](https://github.com/datreeio/datree) and we will gladly help!
