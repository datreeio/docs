---
title: Understanding custom rules
slug: /custom-rules/custom-rules-overview
---

In addition to the tool's built-in rules, you can also write any tests that you wish and run them against your Kubernetes configurations to check for rule violations. The custom rule engine is based on [JSON Schema](https://json-schema.org/), so it supports both **YAML** and **JSON** declarative syntax.

:::info
Note that using custom rules is possible only when in [Policy as code](/dashboard/policy-as-code) mode.
:::

## Quick start

1. Enable [Policy-as-code mode](dashboard/policy-as-code#1-enable-policy-as-code-pac-mode)
2. Create a [policies YAML file](custom-rules/basic-examples#full-custom-rule-examples) with your custom rule (attached to any policy)
3. [Publish](dashboard/policy-as-code#2-apply-a-new-policies-configuration) the policies YAML file

---
## customRules properties

- **identifier** - a unique ID to associate with a policy

- **name** [OPTIONAL] - a title that will be shown when a rule fails

- **defaultMessageOnFailure** [OPTIONAL] - a message that is shown when the property `policies.name[].rules.messageOnFailure` is empty (unique to each identifier)

- **schema** - a custom rule logic written in JSON Schema (as YAML)

---
## Basic examples

Here are some examples of basic use-cases:

1. [Ensure a specific key exists](/custom-rules/basic-examples#ensure-a-specific-key-exists)
2. [Set a minimum value for key of a specific kind](/custom-rules/basic-examples#set-a-minimum-value-for-key-of-a-specific-kind)
3. [Ensure value of a specific key is not one of predefined values](/custom-rules/basic-examples#ensure-value-of-a-specific-key-is-not-one-of-predefined-values)
4. [Ensure a specific key is not found in any container](/custom-rules/basic-examples#ensure-a-specific-key-is-not-found-in-any-container)


Here are three examples of custom rules to showcase how you can set it up:

1.  [Ensure correct environment labels are used](/custom-rules/basic-examples#ensure-correct-environment-labels-are-used)
2.  [Prevent workload from using the (system) default namespaces](/custom-rules/basic-examples#prevent-workload-from-using-the-system-default-namespaces)
3.  [Ensure Deployment has replicas set between 2-10](/custom-rules/basic-examples#ensure-deployment-has-replicas-set-between-2-10)

<br/>

:::tip
The provided examples are written in YAML schema, but custom rules can also be specified as JSON strings.
:::

---
## Helpful links

- [Getting started with JSON Schema](https://json-schema.org/learn/getting-started-step-by-step)
- [Online YAML Schema validator](https://yamlschemavalidator.datree.io/)
- [Online JSON Schema validator](https://www.jsonschemavalidator.net/)
